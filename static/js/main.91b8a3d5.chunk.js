(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{265:function(e,t,a){e.exports=a(573)},270:function(e,t,a){},282:function(e,t){},284:function(e,t,a){var n={"./N3Lexer":112,"./N3Lexer.js":112,"./N3Parser":113,"./N3Parser.js":113,"./N3Store":161,"./N3Store.js":161,"./N3StreamParser":162,"./N3StreamParser.js":162,"./N3StreamWriter":168,"./N3StreamWriter.js":168,"./N3Util":114,"./N3Util.js":114,"./N3Writer":117,"./N3Writer.js":117};function r(e){var t=i(e);return a(t)}function i(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=284},287:function(e,t){},289:function(e,t){},344:function(e,t){},345:function(e,t){},347:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=347},395:function(e,t){},397:function(e,t){},398:function(e,t){},404:function(e,t){},407:function(e,t){},427:function(e,t){},430:function(e,t){},447:function(e,t){},450:function(e,t){},471:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=471},498:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=498},548:function(e,t,a){},549:function(e,t,a){},573:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(51),o=a.n(i),l=(a(270),a(52)),s=a.n(l),c=a(149),d=a(31),u=a(32),m=a(34),h=a(33),p=a(35),g=a(61),f=a(60),v=a(25),y=a.n(v),E=a(1),w=a.n(E),b=a(18),k=a(69),N=a.n(k),C=function(e){return r.a.createElement("label",{htmlFor:"profilePictureUpload"},r.a.createElement("img",{src:e.picture,width:"100%",height:"100%",alt:"This is the ProfilePicture"}),r.a.createElement("input",{id:"profilePictureUpload",name:"profilePictureUpload",type:"file",style:{display:"none"},onChange:e.onChange,accept:"image/*"}))},I=a(44),q=a.n(I),j=a(19),O=a.n(j),F=a(21),S=a.n(F),R=function(e){var t=e.editMode?r.a.createElement(q.a,{placeholder:e.name,onChange:e.onChange,onBlur:e.onBlur,defaultValue:e.name}):r.a.createElement("p",{onClick:e.onClick},e.name);return r.a.createElement(O.a,{style:{border:"solid #FFF 5px",borderRadius:"10",width:"100%"}},r.a.createElement(S.a,{md:"8"},r.a.createElement(O.a,{style:{width:"100%"}},t)))},M=function(e){var t=e.editMode?r.a.createElement(q.a,{placeholder:e.bio,onChange:e.onChange,onBlur:e.onBlur,defaultValue:e.bio}):r.a.createElement("p",{onClick:e.onClick},e.bio);return r.a.createElement(O.a,{style:{border:"solid #FFF 5px",borderRadius:"10",width:"100%"}},r.a.createElement(S.a,{md:"8"},r.a.createElement(O.a,{style:{width:"100%"}},t)))},A=function(e){var t=e.email[0].split(":")[1],a=e.editMode?r.a.createElement(q.a,{placeholder:t,id:e.email[1],onChange:e.onChange,onBlur:e.onBlur,defaultValue:t}):r.a.createElement("p",{onClick:e.onClick},t);return r.a.createElement(O.a,{style:{border:"solid #FFF 5px",borderRadius:"10",width:"100%"}},r.a.createElement(S.a,{md:"8"},r.a.createElement(O.a,{style:{width:"100%"}},a)))},x=function(e){var t=e.telephone[0].split(":")[1],a=e.editMode?r.a.createElement(q.a,{placeholder:t,id:e.telephone[1],onChange:e.onChange,onBlur:e.onBlur,defaultValue:t}):r.a.createElement("p",{onClick:e.onClick},t);return r.a.createElement(O.a,{style:{border:"solid #FFF 5px",borderRadius:"10",width:"100%"}},r.a.createElement(S.a,{md:"8"},r.a.createElement(O.a,{style:{width:"100%"}},a)))},B=function(e){var t=e.editMode?r.a.createElement(q.a,{placeholder:e.job,onChange:e.onChange,onBlur:e.onBlur,defaultValue:e.job}):r.a.createElement("p",{onClick:e.onClick},e.job);return r.a.createElement(O.a,{style:{border:"solid #FFF 5px",borderRadius:"10",width:"100%"}},r.a.createElement(S.a,{md:"8"},r.a.createElement(O.a,{style:{width:"100%"}},t)))},T=new w.a.Namespace("http://xmlns.com/foaf/0.1/"),U=new w.a.Namespace("http://www.w3.org/2006/vcard/ns#"),P=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).fetchUser=function(){y.a.trackSession(function(e){if(e){var t=e.webId,n=w.a.graph();new w.a.Fetcher(n).load(t).then(function(){var e=n.any(w.a.sym(t),T("name")),r=e?e.value:void 0,i=[];n.each(w.a.sym(t),U("hasEmail")).forEach(function(e){n.each(w.a.sym(e),U("value")).forEach(function(t){i.push([t.value,e.value])})});var o=n.any(w.a.sym(t),U("hasPhoto")),l=o?o.value:"",s=n.any(w.a.sym(t),U("role")),c=s?s.value:"",d=n.any(w.a.sym(t),U("note")),u=d?d.value:void 0,m=[];n.each(w.a.sym(t),U("hasTelephone")).forEach(function(e){n.each(w.a.sym(e),U("value")).forEach(function(t){m.push([t.value,e.value])})}),a.setState({webId:t,name:r,picture:l,emails:i,job:c,bio:u,telephones:m,newName:r,editMode:!1})})}else console.log("You are not logged in")})},a.setProfilePicture=function(e){var t=e.target.files[0],n=w.a.graph(),r=new w.a.Fetcher(n),i=a.props.webId,o=a.state.picture,l=new FileReader;l.onload=function(){var e=this.result,a=encodeURIComponent(t.name),l=i.replace("card#me",a);r.webOperation("PUT",l,{data:e,contentType:"image"}).then(function(e){if(201===e.status){var t=new w.a.UpdateManager(n),a=o?w.a.st(w.a.sym(i),U("hasPhoto"),w.a.sym(o),w.a.sym(i).doc()):[],r=w.a.st(w.a.sym(i),U("hasPhoto"),w.a.sym(l),w.a.sym(i).doc());t.update(a,r,function(e,t,a){t?console.log("Changes have been applied, reload page to see them"):alert(a)})}})},l.readAsArrayBuffer(t)},a.state={webId:void 0,name:"",picture:"",emails:[],job:"",bio:"",telephones:[],newName:"",editName:!1,newBio:"",editBio:!1,newEmail:"",editEmail:!1,newTelephone:"",editTelephone:!1,newJob:"",editJob:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"applyNameChanges",value:function(){var e,t,a=this,n=w.a.graph(),r=new w.a.UpdateManager(n);e=w.a.st(w.a.sym(this.props.webId),T("name"),w.a.lit(this.state.name),w.a.sym(this.props.webId).doc()),t=w.a.st(w.a.sym(this.props.webId),T("name"),w.a.lit(this.state.newName),w.a.sym(this.props.webId).doc()),new Promise(function(n,i){r.update(e,t,function(e,t,a){t?(console.log("Changes have been applied!"),n()):i(a)}),a.setState({editName:!1})}).then(function(){a.fetchUser()})}},{key:"getNewName",value:function(e){this.setState({newName:e.target.value})}},{key:"toggleEditName",value:function(){this.setState({editName:!this.state.editName})}},{key:"applyBioChanges",value:function(){var e,t,a=this,n=w.a.graph(),r=new w.a.UpdateManager(n);e=w.a.st(w.a.sym(this.props.webId),U("note"),w.a.lit(this.state.bio),w.a.sym(this.props.webId).doc()),t=w.a.st(w.a.sym(this.props.webId),U("note"),w.a.lit(this.state.newBio),w.a.sym(this.props.webId).doc()),new Promise(function(n,i){r.update(e,t,function(e,t,a){t?(console.log("Changes have been applied!"),n()):i(a)}),a.setState({editBio:!1})}).then(function(){a.fetchUser()})}},{key:"getNewBio",value:function(e){this.setState({newBio:e.target.value})}},{key:"toggleEditBio",value:function(){this.setState({editBio:!this.state.editBio})}},{key:"applyEmailChanges",value:function(e){var t,a,n=this,r=e.target.placeholder,i=e.target.id,o=w.a.graph(),l=new w.a.UpdateManager(o);t=w.a.st(w.a.sym(i),U("value"),w.a.sym("mailto:"+r),w.a.sym(this.state.webId).doc()),a=w.a.st(w.a.sym(i),U("value"),w.a.sym("mailto:"+this.state.newEmail),w.a.sym(this.state.webId).doc()),new Promise(function(e,n){l.update(t,a,function(t,a,r){a?e():n(r)})}).then(function(){n.setState({editEmail:!1}),n.fetchUser()})}},{key:"getNewEmail",value:function(e){this.setState({newEmail:e.target.value})}},{key:"toggleEditEmail",value:function(){this.setState({editEmail:!this.state.editEmail})}},{key:"applyJobChanges",value:function(){var e,t,a=this,n=w.a.graph(),r=new w.a.UpdateManager(n);e=w.a.st(w.a.sym(this.props.webId),U("role"),w.a.lit(this.state.job),w.a.sym(this.props.webId).doc()),t=w.a.st(w.a.sym(this.props.webId),U("role"),w.a.lit(this.state.newJob),w.a.sym(this.props.webId).doc()),new Promise(function(a,n){r.update(e,t,function(e,t,r){t?a():n(r)})}).then(function(){a.setState({editJob:!1}),a.fetchUser()})}},{key:"getNewJob",value:function(e){this.setState({newJob:e.target.value})}},{key:"toggleEditJob",value:function(){this.setState({editJob:!this.state.editJob})}},{key:"applyTelephoneChanges",value:function(e){var t,a,n=this,r=e.target.placeholder,i=e.target.id,o=w.a.graph(),l=new w.a.UpdateManager(o);t=w.a.st(w.a.sym(i),U("value"),w.a.sym("tel:"+r),w.a.sym(this.state.webId).doc()),a=w.a.st(w.a.sym(i),U("value"),w.a.sym("tel:"+this.state.newTelephone),w.a.sym(this.state.webId).doc()),new Promise(function(e,n){l.update(t,a,function(t,a,r){a?e():n(r)})}).then(function(){n.setState({editTelephone:!1}),n.fetchUser()})}},{key:"getNewTelephone",value:function(e){this.setState({newTelephone:e.target.value})}},{key:"toggleEditTelephone",value:function(){this.setState({editTelephone:!this.state.editTelephone})}},{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"render",value:function(){var e=this,t=this.state.name?r.a.createElement(R,{name:this.state.name,editMode:this.state.editName,onBlur:this.applyNameChanges.bind(this),onChange:this.getNewName.bind(this),onClick:this.toggleEditName.bind(this)}):r.a.createElement(R,{name:"You did not enter your name yet...",editMode:this.state.editName,onBlur:this.applyNameChanges.bind(this),onChange:this.getNewName.bind(this),onClick:this.toggleEditName.bind(this)}),a=this.state.job?r.a.createElement(B,{job:this.state.job,editMode:this.state.editJob,onBlur:this.applyJobChanges.bind(this),onChange:this.getNewJob.bind(this),onClick:this.toggleEditJob.bind(this)}):r.a.createElement(B,{job:"You did not enter your job yet...",editMode:this.state.editJob,onBlur:this.applyJobChanges.bind(this),onChange:this.getNewJob.bind(this),onClick:this.toggleEditJob.bind(this)}),n=this.state.bio?r.a.createElement(M,{bio:this.state.bio,editMode:this.state.editBio,onBlur:this.applyBioChanges.bind(this),onChange:this.getNewBio.bind(this),onClick:this.toggleEditBio.bind(this)}):r.a.createElement(M,{bio:"You do not have a bio yet...",editMode:this.state.editBio,onBlur:this.applyBioChanges.bind(this),onChange:this.getNewBio.bind(this),onClick:this.toggleEditBio.bind(this)}),i=this.state.emails.map(function(t,a){return r.a.createElement(A,{key:a,email:t,editMode:e.state.editEmail,onChange:e.getNewEmail.bind(e),onClick:e.toggleEditEmail.bind(e),onBlur:e.applyEmailChanges.bind(e)})}),o=this.state.telephones.map(function(t,a){return r.a.createElement(x,{key:a,telephone:t,editMode:e.state.editTelephone,onChange:e.getNewTelephone.bind(e),onClick:e.toggleEditTelephone.bind(e),onBlur:e.applyTelephoneChanges.bind(e)})});return r.a.createElement(N.a,null,this.state.webId?r.a.createElement("div",null,r.a.createElement(O.a,null,r.a.createElement(S.a,null,r.a.createElement(C,{picture:this.state.picture,onChange:this.setProfilePicture})),r.a.createElement(S.a,null,t,a,n,i,o)),r.a.createElement(O.a,null,r.a.createElement(b.a,{onClick:this.props.logout},"Logout"))):r.a.createElement("p",null,"You are not logged in..."))}}]),t}(r.a.Component),D=a(259),J=a.n(D),L=function(e){var t=e.friend;return r.a.createElement(b.c,null,r.a.createElement(J.a,{fluid:!0,width:"4%",src:t.picture}),r.a.createElement(b.e,{variant:"paragraph"},t.name))},H=new w.a.Namespace("http://xmlns.com/foaf/0.1/"),Y=new w.a.Namespace("http://www.w3.org/2006/vcard/ns#"),W=new w.a.Namespace("http://www.w3.org/ns/auth/acl#"),_=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={webId:void 0,friendToAdd:"",canAddFriend:!1,friends:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"fetchFriends",value:function(){var e=this,t=w.a.graph(),a=new w.a.Fetcher(t),n=this.state.webId,r=w.a.graph(),i=new w.a.Fetcher(r),o=n.replace("card#me","card.acl#viewer");i.load(o),a.load(n).then(function(i){var l=t.each(w.a.sym(n),H("knows")).map(function(e){return a.load(e.value).then(function(){console.log("Fetched "+e.value+"'s Profile");var a=t.any(w.a.sym(e.value),H("name")),n=t.any(w.a.sym(e.value),Y("hasPhoto"));n=n?n.value:"";var i=r.statementsMatching(o,W("agent"),w.a.sym(e.value)).length>0;return{name:a.value,webId:e.value,access:i,picture:n}})});Promise.all(l).then(function(t){e.setState({friends:t})})})}},{key:"changeFriendToAdd",value:function(e){var t=this,a=new XMLHttpRequest,n=e.target.value;a.onreadystatechange=function(){a.readyState===XMLHttpRequest.DONE&&(200===a.status?t.setState({friendToAdd:n,canAddFriend:!0}):t.setState({canAddFriend:!1}))},new RegExp(/(\w+(:\/\/){1})(\w+\.)(\w+\.)(\w+\/)+/g).test(e.target.value)&&(a.open("GET",n),a.send())}},{key:"addFriend",value:function(){var e=this.state.webId,t=this.state.friendToAdd;console.log(t);var a=w.a.graph(),n=new w.a.UpdateManager(a),r=w.a.st(w.a.sym(e),H("knows"),w.a.sym(t),w.a.sym(e).doc());n.update([],r,function(e,t,a){e?console.log("Changes have been applied, reload page to see them"):alert(a)})}},{key:"componentDidMount",value:function(){var e=this;y.a.trackSession(function(t){t&&(e.setState({webId:t.webId}),e.fetchFriends())})}},{key:"render",value:function(){var e=this.state.canAddFriend?r.a.createElement("div",null,r.a.createElement(b.d,{description:"Enter a friends webId",onInput:this.changeFriendToAdd.bind(this)}),r.a.createElement(b.a,{onClick:this.addFriend.bind(this)},"Add Friend")):r.a.createElement("div",null,r.a.createElement(b.d,{type:"text",description:"Enter a friends webId",onInput:this.changeFriendToAdd.bind(this)}),r.a.createElement(b.a,{disabled:!0},"Add Friend")),t=this.state.friends.map(function(e,t){return r.a.createElement(L,{friend:e,key:t})});return r.a.createElement(N.a,null,r.a.createElement(b.b,null,t),this.state.webId?e:r.a.createElement("p",null,"You are not logged in..."))}}]),t}(r.a.Component),V=a(150),X=a.n(V),G=a(260),z=a.n(G),$=new w.a.Namespace("http://xmlns.com/foaf/0.1/"),K=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={webId:e.webId,friendToAdd:"",canAddFriend:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"changeFriendToAdd",value:function(e){var t=this,a=new XMLHttpRequest,n=e.target.value;a.onreadystatechange=function(){a.readyState===XMLHttpRequest.DONE&&(200===a.status?t.setState({friendToAdd:n,canAddFriend:!0}):t.setState({canAddFriend:!1}))},new RegExp(/(\w+(:\/\/){1})(\w+\.)(\w+\.)(\w+\/)+/g).test(e.target.value)&&(a.open("GET",n),a.send())}},{key:"addFriend",value:function(){var e=this.props.webId,t=this.state.friendToAdd;console.log(t);var a=w.a.graph(),n=new w.a.UpdateManager(a),r=w.a.st(w.a.sym(e),$("knows"),w.a.sym(t),w.a.sym(e).doc());n.update([],r,function(e,t,a){e?console.log("Changes have been applied, reload page to see them"):alert(a)})}},{key:"render",value:function(){return r.a.createElement("div",{style:{padding:"3%"}},r.a.createElement(X.a,{bg:"light",variant:"light",fixed:"top"},r.a.createElement(X.a.Brand,null,r.a.createElement("img",{src:"favicon.ico",width:"30",height:"30",alt:"Solid logo"}),r.a.createElement("span",{style:{marginLeft:"5%"}},"Solid Web")),r.a.createElement(z.a,{className:"mr-auto"},r.a.createElement(g.b,{to:"/profile-viewer-react/overview",style:{color:"#000",marginLeft:"10%"}},"Overview"),r.a.createElement(g.b,{to:"/profile-viewer-react/",style:{color:"#000",marginLeft:"10%"}},"Profile"),r.a.createElement(g.b,{to:"/profile-viewer-react/contacts",style:{color:"#000",marginLeft:"10%"}},"Contacts"),r.a.createElement(g.b,{to:"/profile-viewer-react/health",style:{color:"#000",marginLeft:"10%"}},"Health Data")),this.props.webId?"":r.a.createElement(b.a,{onClick:this.props.login},"Login")))}}]),t}(r.a.Component),Q=a(39),Z=(a(548),a(549),a(574)),ee=a(575),te=function(e){var t=e.request,a=t[0],n=t[1],i=t[2],o=t[3],l=t[4],s=t[5],c=t[11];return r.a.createElement("div",{className:"requestcard"},r.a.createElement("div",{className:"requestcard-header"},r.a.createElement("img",{className:"requestcard-header-avatar",src:i,alt:"avatar"}),r.a.createElement("strong",null,a)," wants to: ","Accepted"==c?r.a.createElement(b.e,{style:{color:"green",marginLeft:"20%"}},"Accepted"):""),o.map(function(t,a){return r.a.createElement("div",{className:"requestcard-request",key:a},r.a.createElement(Z.a,null,t),r.a.createElement(Z.a,null,r.a.createElement("p",{style:{color:"#00F"},onClick:e.onToggle,index:e.index},"More Information")),"Accepted"==c?r.a.createElement(ee.a,null,r.a.createElement(Z.a,{lg:"6"},r.a.createElement(b.a,{onClick:e.onRevoke,variant:"outlined",sender:n,notification:s,id:l},"Revoke"))):r.a.createElement("div",null,r.a.createElement(b.a,{className:"request\u0192card-request-button",variant:"outlined",sender:n,notification:s,id:l,onClick:e.onAccept},"Accept"),r.a.createElement(b.a,{className:"requestcard-request-button",variant:"outlined",sender:n,notification:s,id:l,onClick:e.onDeny},"Deny")))}))},ae=a(71),ne=a.n(ae),re=a(263),ie=a.n(re),oe=a(576),le=function(e){var t=e.request,a=t[0],n=t[1],i=(t[2],t[3][0]),o=(t[4],t[5],t[6]),l=t[7],s=t[8],c=t[9],d=t[10],u=t[12],m=t[13],h=c?r.a.createElement("p",{style:{color:"green"}},"Has provided a risk assesment"):r.a.createElement("p",{style:{color:"red"}},"Has not provided a risk assesment"),p=d?r.a.createElement("p",{style:{color:"green"}},"Has provided a linked data profile"):r.a.createElement("p",{style:{color:"red"}},"Has not provided an identity"),g=""!==u&&""!==m?r.a.createElement("p",{style:{color:"green"}},"Has provided a expiring date to permisions"):r.a.createElement("p",{style:{color:"red"}},"Permission has no expiration");return r.a.createElement(ne.a,Object.assign({},e,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),r.a.createElement(ne.a.Header,{closeButton:!0},r.a.createElement(ne.a.Title,{id:"contained-modal-title-vcenter"},a+" wants to "+i)),r.a.createElement(ne.a.Body,null,r.a.createElement(oe.a,null,r.a.createElement(ee.a,null,r.a.createElement(Z.a,{lg:"1"}),r.a.createElement(Z.a,{lg:"5",style:{padding:"5%",backgroundColor:"rgb(248, 248, 248)",borderRadius:"8px",marginRight:"10px"}},r.a.createElement(ee.a,null,r.a.createElement("h4",{style:{color:"#3256D7"}},"General Information")),r.a.createElement(ee.a,null,r.a.createElement(Z.a,{lg:"1"}),r.a.createElement(Z.a,{lg:"5"},"Request from:"),r.a.createElement(Z.a,{lg:"5"},n),r.a.createElement(Z.a,{lg:"1"})),r.a.createElement(ee.a,null,r.a.createElement(Z.a,{lg:"1"}),r.a.createElement(Z.a,{lg:"5"},"Date of Request:"),r.a.createElement(Z.a,{lg:"5"},u),r.a.createElement(Z.a,{lg:"1"})),r.a.createElement(ee.a,null,r.a.createElement(Z.a,{lg:"1"}),r.a.createElement(Z.a,{lg:"5"},"Expiration Date:"),r.a.createElement(Z.a,{lg:"5"},m),r.a.createElement(Z.a,{lg:"1"})),r.a.createElement(ee.a,null,r.a.createElement(Z.a,{lg:"1"}),r.a.createElement(Z.a,{lg:"5"},"Type of Information:"),r.a.createElement(Z.a,{lg:"5"},o),r.a.createElement(Z.a,{lg:"1"})),r.a.createElement(ee.a,null,r.a.createElement(Z.a,{lg:"1"}),r.a.createElement(Z.a,{lg:"5"},"Source:"),r.a.createElement(Z.a,{lg:"5"},n),r.a.createElement(Z.a,{lg:"1"})),r.a.createElement(ee.a,null,r.a.createElement(Z.a,{lg:"1"}),r.a.createElement(Z.a,{lg:"5"},"Intent:"),r.a.createElement(Z.a,{lg:"5"},l),r.a.createElement(Z.a,{lg:"1"}))),r.a.createElement(Z.a,{lg:"5",style:{padding:"5%",backgroundColor:"rgb(248, 248, 248)",borderRadius:"8px",marginLeft:"10px"}},r.a.createElement(ee.a,null,r.a.createElement("h4",{style:{color:"#3256D7"}},"Possible Risks: ")),r.a.createElement(ee.a,null,r.a.createElement("p",{style:{color:"#333131"}},"By giving consent to this permission request I am aware that there might be:"," ")),s.map(function(e,t){return""!==e?r.a.createElement(ee.a,null,r.a.createElement(Z.a,{lg:"1"}),r.a.createElement(Z.a,{lg:!0},r.a.createElement("li",null,e)),r.a.createElement(Z.a,{lg:"1"})):""}))),r.a.createElement(ee.a,null,r.a.createElement(Z.a,{lg:"1"}),r.a.createElement(Z.a,{lg:!0,style:{padding:"5%",backgroundColor:"rgb(248, 248, 248)",borderRadius:"8px",marginTop:"10px"}},r.a.createElement(ee.a,null,r.a.createElement("h4",{style:{color:"#3256D7"}},"Evaluation: ")),r.a.createElement(ee.a,null,r.a.createElement(Z.a,{lg:"1"}),r.a.createElement(Z.a,{lg:!0},h),r.a.createElement(Z.a,{lg:"1"})),r.a.createElement(ee.a,null,r.a.createElement(Z.a,{lg:"1"}),r.a.createElement(Z.a,{lg:!0},p),r.a.createElement(Z.a,{lg:"1"})),r.a.createElement(ee.a,null,r.a.createElement(Z.a,{lg:"1"}),r.a.createElement(Z.a,{lg:!0},g),r.a.createElement(Z.a,{lg:"1"}))),r.a.createElement(Z.a,{lg:"1"})),r.a.createElement(ee.a,null))),r.a.createElement(ne.a.Footer,null,r.a.createElement(ie.a,{onClick:e.onHide},"Close")))},se=w.a.Namespace("http://www.w3.org/ns/ldp#"),ce=w.a.Namespace("http://www.w3.org/ns/auth/acl#"),de=w.a.Namespace("https://a-solid-web.github.io/permission-ontology/permissionrequests.rdf#"),ue=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).addRequest=a.addRequest.bind(Object(Q.a)(Object(Q.a)(a))),a.removeRequest=a.removeRequest.bind(Object(Q.a)(Object(Q.a)(a))),a.fetchNotificationAddresses=a.fetchNotificationAddresses.bind(Object(Q.a)(Object(Q.a)(a))),a.fetchNotification=a.fetchNotification.bind(Object(Q.a)(Object(Q.a)(a))),a.state={webId:a.props.webId,requests:[],currentRequest:0,showModal:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"fetchNotificationAddresses",value:function(e){var t=this,a=w.a.graph(),n=new w.a.Fetcher(a),r=e.replace("profile/card#me","inbox");n.load(r).then(function(e){a.each(w.a.sym(r),se("contains")).forEach(function(e){var a=r+"/"+e.value.split("/")[3];t.fetchNotification(a)})})}},{key:"evaluateRisks",value:function(e){var t=!0;return e.forEach(function(e){""===e&&(t=!1)}),t}},{key:"fetchNotification",value:function(e){var t=this,a=w.a.graph();new w.a.Fetcher(a).load(e).then(function(n){var r=a.any(w.a.sym(e),de("requestFrom"));if(r){var i=a.any(w.a.sym(e),de("requestDataType")).value.split("#")[1],o=a.any(w.a.sym(e),de("requests")).value,l=a.any(w.a.sym(e),de("wasSentOn")),s=l?l.value:"",c=a.any(w.a.sym(e),de("expires")),d=c?c.value:"",u=a.any(w.a.sym(e),de("hasStatus")),m=u?u.value:"",h=a.any(w.a.sym(e),de("privacyRisklevel")),p=h?h.value:"",g=a.any(w.a.sym(e),de("financialRisklevel")),f=g?g.value:"",v=a.any(w.a.sym(e),de("legalRisklevel")),y=v?v.value:"",E=[p,f,y],b=t.evaluateRisks(E),k=a.any(w.a.sym(e),de("hasIntent")),N=k?k.value.split("#")[1]:"";if(N){var C=r.value.includes("profile/card#me");t.addRequest([r.value,r.value,"",["Access "+i+" ("+o+")"],o,e,i,N,[p,f,y],b,C,m,s,d])}}})}},{key:"acceptRequest",value:function(e){var t=this,a=e.target.id;console.log(a);var n=e.target.getAttribute("sender"),r=e.target.getAttribute("notification"),i=a+".acl",o=i+"#owner",l=i+"#viewer";console.log(o);var s=w.a.graph(),c=new w.a.Fetcher(s),d=new w.a.UpdateManager(s);c.load(i).then(function(e){var t=[w.a.st(w.a.sym(l),ce("agent"),w.a.sym(n),w.a.sym(l).doc())];d.update([],t,function(e,t,a){t?console.log("Added .acl triples"):console.log(a)})}).catch(function(e){var r=[w.a.st(w.a.sym(o),ce("agent"),w.a.sym(t.state.webId),w.a.sym(o).doc()),w.a.st(w.a.sym(o),ce("accessTo"),w.a.sym(a),w.a.sym(o).doc()),w.a.st(w.a.sym(o),ce("defaultForNew"),w.a.sym(a),w.a.sym(o).doc()),w.a.st(w.a.sym(o),ce("mode"),ce("Control"),w.a.sym(o).doc()),w.a.st(w.a.sym(o),ce("mode"),ce("Read"),w.a.sym(o).doc()),w.a.st(w.a.sym(o),ce("mode"),ce("Write"),w.a.sym(o).doc()),w.a.st(w.a.sym(l),ce("agent"),w.a.sym(n),w.a.sym(l).doc()),w.a.st(w.a.sym(l),ce("accessTo"),w.a.sym(a),w.a.sym(l).doc()),w.a.st(w.a.sym(l),ce("defaultForNew"),w.a.sym(a),w.a.sym(l).doc()),w.a.st(w.a.sym(l),ce("mode"),ce("Read"),w.a.sym(l).doc())];d.put(w.a.sym(i),r,"text/turtle",function(e,t,a){t?console.log("Added .acl triples"):console.log(a)})});var u=[w.a.st(w.a.sym(r),de("hasStatus"),w.a.lit(""),w.a.sym(r).doc())],m=[w.a.st(w.a.sym(r),de("hasStatus"),w.a.lit("Accepted"),w.a.sym(r).doc())];d.update(u,m,function(e,t,a){t?console.log("Added Accepted triple"):console.log(a),window.location=window.location.href})}},{key:"denyRequest",value:function(e){var t=e.target.getAttribute("notification"),a=w.a.graph(),n=(new w.a.Fetcher(a),new w.a.UpdateManager(a)),r=[w.a.st(w.a.sym(t),de("hasStatus"),w.a.lit("Denied"),w.a.sym(t).doc())];n.update([],r,function(e,t,a){t?window.location=window.location.href:alert(a)})}},{key:"revokeRequest",value:function(e){var t=e.target.getAttribute("notification"),a=e.target.getAttribute("sender"),n=e.target.id+".acl"+"#viewer",r=w.a.graph(),i=(new w.a.Fetcher(r),new w.a.UpdateManager(r)),o=[w.a.st(w.a.sym(n),ce("agent"),w.a.sym(a),w.a.sym(n).doc())];i.update(o,[],function(e,t,a){t?console.log("Revoked access in .acl file"):console.log(a)});var l=[w.a.st(w.a.sym(t),de("hasStatus"),w.a.lit("Accepted"),w.a.sym(t).doc())],s=[w.a.st(w.a.sym(t),de("hasStatus"),w.a.lit(""),w.a.sym(t).doc())];i.update(l,s,function(e,t,a){t?window.location=window.location.href:alert(a)})}},{key:"addNotification",value:function(e,t,a,n){this.state.requests.push()}},{key:"addRequest",value:function(e){var t=this.state.requests.slice();t.push(e),this.setState({requests:t})}},{key:"removeRequest",value:function(e){if(e===parseInt(e,10)){var t=this.state.requests.slice();t.splice(e,1),this.setState({requests:t})}else{var a=this.state.requests.slice().filter(function(t,a,n){return t!==e});this.setState({requests:a})}}},{key:"toggleModal",value:function(e){this.state.showModal||this.setState({showModal:!this.state.showModal,currentRequest:e.target.getAttribute("index")}),this.setState({showModal:!this.state.showModal})}},{key:"getRequests",value:function(){var e=this;return 0===this.state.requests.length?r.a.createElement("div",{className:"requestcard-request"},"Looks like you don't have any requests at the moment"):this.state.requests.map(function(t,a){return"Denied"!==t[11]?r.a.createElement(te,{key:a,index:a,request:t,onToggle:e.toggleModal.bind(e),onAccept:e.acceptRequest.bind(e),onDeny:e.denyRequest.bind(e),onRevoke:e.revokeRequest.bind(e)}):""})}},{key:"componentDidMount",value:function(){var e=this;y.a.trackSession(function(t){t?e.setState({webId:t.webId}):console.log("You are not logged in..."),e.fetchNotificationAddresses(e.state.webId)})}},{key:"render",value:function(){var e=this.getRequests();return r.a.createElement("div",{className:"grid-container",addrequest:this.addRequest,removerequest:this.removeRequest},r.a.createElement("div",{id:"toggle"},r.a.createElement("div",null,"Requests"),r.a.createElement("div",null,"Activity")),r.a.createElement("div",{className:"requestcards"},e),this.state.requests[this.state.currentRequest]?r.a.createElement(le,{show:this.state.showModal,onHide:this.toggleModal.bind(this),request:this.state.requests[this.state.currentRequest]}):"")}}]),t}(r.a.Component),me=function(e){return r.a.createElement(b.a,null,"Upload",r.a.createElement("input",{id:"upload",name:"upload",type:"file",onInput:e.onChange,style:{opacity:0}}))},he=w.a.Namespace("http://www.w3.org/ns/ldp#"),pe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={webId:void 0,picture:void 0},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"uploadPic",value:function(e){var t=e.target.files[0],a=w.a.graph(),n=new w.a.Fetcher(a),r=this.state.webId,i=new FileReader;i.onload=function(){var e=this.result,a=encodeURIComponent(t.name),i=r.replace("/profile/card#me","/health/"+a);n.webOperation("PUT",i,{data:e,contentType:"image"})},i.readAsArrayBuffer(t),this.fetchPictures()}},{key:"fetchPictures",value:function(){var e=this,t=w.a.graph(),a=new w.a.Fetcher(t),n=this.state.webId.replace("profile/card#me","health/");a.load(n).then(function(a){var r=t.any(w.a.sym(n),he("contains"));e.setState({picture:r?r.value:""})})}},{key:"componentDidMount",value:function(){var e=this;y.a.trackSession(function(t){e.setState({webId:t.webId}),e.fetchPictures()})}},{key:"render",value:function(){var e=this.state.picture?r.a.createElement("img",{src:this.state.picture,alt:"Here is your medical data"}):"";return r.a.createElement(N.a,null,r.a.createElement(S.a,{lg:"1"}),r.a.createElement(S.a,{lg:"10"},r.a.createElement("div",{style:{margin:"5%"}},e),r.a.createElement(me,{onChange:this.uploadPic.bind(this)})),r.a.createElement(S.a,{lg:"1"}))}}]),t}(r.a.Component),ge=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={webId:void 0},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"fetchUser",value:function(){var e=this;y.a.trackSession(function(t){t?(console.log("You are logged in... Fetching your data now"),e.setState({webId:t.webId})):console.log("You are not logged in")})}},{key:"login",value:function(){var e=Object(c.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.currentSession();case 2:if(t=e.sent){e.next=8;break}return e.next=6,y.a.login("https://solid.community");case 6:e.next=9;break;case 8:this.setState({webId:t.webID});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(c.a)(s.a.mark(function e(){var t=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:y.a.logout().then(function(){t.setState({webId:void 0})});case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"render",value:function(){var e=this;return r.a.createElement(g.a,null,r.a.createElement("div",null,r.a.createElement(K,{login:this.login.bind(this),webId:this.state.webId}),r.a.createElement(f.c,null,r.a.createElement(f.a,{path:"/profile-viewer-react/overview",render:function(){return r.a.createElement(ue,null)}}),r.a.createElement(f.a,{path:"/profile-viewer-react/",render:function(){return r.a.createElement(P,{logout:e.logout.bind(e)})},exact:!0}),r.a.createElement(f.a,{path:"/profile-viewer-react/overview/health",render:function(){return r.a.createElement(pe,null)},exact:!0}),r.a.createElement(f.a,{path:"/profile-viewer-react/contacts",render:function(){return r.a.createElement(_,null)},exact:!0}))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[265,1,2]]]);
//# sourceMappingURL=main.91b8a3d5.chunk.js.map